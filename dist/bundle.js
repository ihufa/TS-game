!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);var i={pngs:{},units:[],buildings:[{player:"PLAYER1",name:"test0",type:"commandCenter",x:350,y:550,radius:75,color:"#ff0000"}],resources:[{type:"mineral",x:0,y:700,value:1500},{type:"mineral",x:37,y:650,value:1500},{type:"mineral",x:0,y:600,value:1500},{type:"mineral",x:37,y:550,value:1500},{type:"mineral",x:0,y:500,value:1500}],selectedBuilding:void 0,preSelectedBuildings:[],selectedUnits:[],preSelectedUnits:[]},r=function(e,t){if(0===e&&0===t)return 0;return t>0&&e>0?t/e>3?0:t/e<1/3?6:7:t<0&&e>0?t/e<-3?4:t/e>-1/3?6:5:t<0&&e<0?t/e<1/3?2:t/e>3?4:3:t>0&&e<0?t/e>-1/3?2:t/e<-3?0:1:void 0};function o(e,t){for(var n=0;n<t.length;n++)if(t[n].name!==e.name&&Math.sqrt(Math.pow(t[n].x-(e.x+e.xvel),2)+Math.pow(t[n].y-(e.y+e.yvel),2))<t[n].radius+e.radius)return!0;return!1}n(0);var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=document.querySelector("#root"),l=d.getContext("2d"),u={ctx:l,height:d.height,width:d.width},s={xStart:0,yStart:0,xEnd:0,yEnd:0},c=Date.now(),f=function(){!function(e,t){function n(a){e.removeEventListener("mouseup",n,!1),e.removeEventListener("mousemove",r,!1);var d,l,u,s=t.xStart,c=t.xEnd,f=t.yStart,y=t.yEnd;if(Math.abs(s-c)+Math.abs(f-y)<5){t.xStart=0,t.yStart=0,t.xEnd=0,t.yEnd=0,i.selectedUnits=[],i.selectedBuilding=void 0;for(var m=0;m<i.units.length;m++)if(Math.pow(i.units[m].x-s,2)+Math.pow(i.units[m].y-f,2)<Math.pow(i.units[m].radius,2)){i.selectedUnits=[i.units[m]];break}if(!i.selectedUnits.length)for(m=0;m<i.buildings.length;m++)if(Math.pow(i.buildings[m].x-s,2)+Math.pow(i.buildings[m].y-f,2)<Math.pow(i.buildings[m].radius,2)){i.selectedBuilding=i.buildings[m],d=i.selectedBuilding.player,l=i.selectedBuilding.x,u=i.selectedBuilding.y,i.units.push({player:d,name:"test1",type:"marine",hp:45,damage:5,fireFrequency:1,armor:0,speed:2,x:l,y:u,xvel:0,yvel:0,radius:15,color:"white",moveCommand:!1,attackCommand:!1,gotoX:0,gotoY:0});break}}else{i.preSelectedUnits=[];var g=s<c?s:c,p=s<c?c:s,v=f<y?f:y,h=f<y?y:f;i.selectedUnits=i.units.filter((function(e){return e.x>g&&e.x<p&&e.y>v&&e.y<h})),i.selectedUnits.length||(i.selectedBuilding=i.buildings.filter((function(e){return e.x>g&&e.x<p&&e.y>v&&e.y<h}))[0]),t.xStart=0,t.yStart=0,t.xEnd=0,t.yEnd=0}i.selectedUnits.length&&e.addEventListener("mousedown",o,!1),i.selectedBuilding&&(e.addEventListener("mousedown",o,!1),console.log("building selected"))}function r(e){t.xEnd=e.clientX,t.yEnd=e.clientY;var n=t.xStart,r=t.xEnd,o=t.yStart,a=t.yEnd,d=n<r?n:r,l=n<r?r:n,u=o<a?o:a,s=o<a?a:o;i.preSelectedUnits=i.units.filter((function(e){return e.x>d&&e.x<l&&e.y>u&&e.y<s}))}function o(t){2===t.button?i.selectedUnits.forEach((function(e){var n=e.x-t.clientX,i=e.y-t.clientY;Math.abs(n)>Math.abs(i)?(e.xvel=-n/Math.abs(n)*e.speed,e.yvel=-i/Math.abs(n)*e.speed):(e.xvel=-n/Math.abs(i)*e.speed,e.yvel=-i/Math.abs(i)*e.speed),e.moveCommand=!0,e.gotoX=t.clientX,e.gotoY=t.clientY})):e.removeEventListener("mousedown",o,!1)}window.oncontextmenu=function(){return!1},e.addEventListener("mousedown",(function(i){0===i.button&&(t.xStart=i.clientX,t.yStart=i.clientY,t.xEnd=i.clientX,t.yEnd=i.clientY,e.addEventListener("mouseup",n,!1),e.addEventListener("mousemove",r,!1))}),!1)}(d,s)},y=function(){var e,t,n,a=Date.now();(a-c)/1e3,l.fillStyle="#665f4a",l.fillRect(0,0,d.width,d.height),function(e){for(var t=e.filter((function(e){return 0!==e.xvel||0!==e.yvel})),n=0;n<t.length;n++){Math.pow(t[n].x-t[n].gotoX,2)+Math.pow(t[n].y-t[n].gotoY,2)<100&&(t[n].xvel=0,t[n].yvel=0,t[n].moveCommand=!1);var i=o(t[n],e);!i&&t[n].moveCommand&&(t[n].x=t[n].x+t[n].xvel,t[n].y=t[n].y+t[n].yvel),i&&t[n].moveCommand&&(t[n].moveCommand=!1),i||t[n].moveCommand||(t[n].moveCommand=!0)}}(i.units),t=s,n=(e=u).ctx,e.width,e.height,i.buildings.forEach((function(e){n.drawImage(i.pngs[e.type],e.x-e.radius,e.y-e.radius)})),i.units.forEach((function(e){n.drawImage(i.pngs[e.type],50*r(e.xvel,e.yvel),0,50,49,e.x-17,e.y-17,34,34)})),i.resources.forEach((function(e){n.drawImage(i.pngs[e.type],e.x,e.y,75,50)})),i.selectedBuilding&&(n.drawImage(i.pngs.menu,0,800),n.beginPath(),n.arc(i.selectedBuilding.x,i.selectedBuilding.y,i.selectedBuilding.radius,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=2,n.stroke()),i.preSelectedBuildings.forEach((function(e){n.beginPath(),n.arc(e.x+.5*e.radius,e.y+.5*e.radius,(e.radius+e.radius)/2,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=1,n.stroke()})),i.selectedUnits.forEach((function(e){n.beginPath(),n.arc(e.x,e.y,e.radius+5,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=2,n.stroke()})),i.preSelectedUnits.forEach((function(e){n.beginPath(),n.arc(e.x,e.y,e.radius+5,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=1,n.stroke()})),n.strokeStyle=" #00ff00",n.strokeRect(t.xStart,t.yStart,t.xEnd-t.xStart,t.yEnd-t.yStart),window.requestAnimationFrame(y)},m=function(){y(),f()};!function(e){for(var t=0,n=Object.keys(e),r=function(r){var o=new Image;o.addEventListener("load",(function(){var e;i.pngs=a(a({},i.pngs),((e={})[n[r]]=o,e)),console.log("loaded",o),++t===n.length&&m()})),o.src=e[n[r]]},o=0;o<n.length;o++)r(o)}({marine:"./media/marine.png",commandCenter:"./media/commandCenter.png",mineral:"./media/minerals.png",menu:"./media/menu.png"})}]);