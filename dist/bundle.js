!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);var r={pngs:[],units:[{player:"PLAYER1",name:"test1",type:"marine",speed:2,x:500,y:300,xvel:0,yvel:0,radius:15,color:"#00ff00",moveCommand:!1,attackCommand:!1,gotoX:0,gotoY:0},{player:"PLAYER1",name:"test2",type:"marine",speed:2,x:550,y:350,xvel:0,yvel:0,radius:15,color:"#00ff00",moveCommand:!1,attackCommand:!1,gotoX:0,gotoY:0}],buildings:[{player:"PLAYER1",name:"test0",type:"commandCenter",x:350,y:550,radius:18,color:"#ff0000"}],resources:[{type:"mineral",x:0,y:700,value:1500},{type:"mineral",x:37,y:650,value:1500},{type:"mineral",x:0,y:600,value:1500},{type:"mineral",x:37,y:550,value:1500},{type:"mineral",x:0,y:500,value:1500}],selectedBuildings:[],preSelectedBuildings:[],selectedUnits:[],preSelectedUnits:[]},i=function(e,t){if(0===e&&0===t)return 0;return t>0&&e>0?t/e>3?0:t/e<1/3?6:7:t<0&&e>0?t/e<-3?4:t/e>-1/3?6:5:t<0&&e<0?t/e<1/3?2:t/e>3?4:3:t>0&&e<0?t/e>-1/3?2:t/e<-3?0:1:void 0};function o(e,t){for(var n=0;n<t.length;n++)if(t[n].name!==e.name&&Math.sqrt(Math.pow(t[n].x-(e.x+e.xvel),2)+Math.pow(t[n].y-(e.y+e.yvel),2))<t[n].radius+e.radius)return!0;return!1}n(0);var a=document.querySelector("#root"),l=a.getContext("2d"),s={ctx:l,height:a.height,width:a.width},u={xStart:0,yStart:0,xEnd:0,yEnd:0},d=Date.now(),c=function(){!function(e,t){function n(a){e.removeEventListener("mouseup",n,!1),e.removeEventListener("mousemove",i,!1);var l,s,u,d=t.xStart,c=t.xEnd,f=t.yStart,m=t.yEnd;if(Math.abs(d-c)+Math.abs(f-m)<5){t.xStart=0,t.yStart=0,t.xEnd=0,t.yEnd=0,r.selectedUnits=[],r.selectedUnits=[];for(var y=0;y<r.units.length;y++)if(Math.pow(r.units[y].x-d,2)+Math.pow(r.units[y].y-f,2)<Math.pow(r.units[y].radius,2)){r.selectedUnits=[r.units[y]];break}if(!r.selectedUnits.length)for(y=0;y<r.buildings.length;y++)if(Math.pow(r.buildings[y].x-d,2)+Math.pow(r.buildings[y].y-f,2)<Math.pow(r.buildings[y].radius,2)){r.selectedBuildings=[r.buildings[y]],l="PLAYER1",s=400,u=400,r.units.push({player:l,name:"test1",type:"marine",speed:2,x:s,y:u,xvel:0,yvel:0,radius:15,color:"white",moveCommand:!1,attackCommand:!1,gotoX:0,gotoY:0});break}}else{r.preSelectedUnits=[];var p=d<c?d:c,v=d<c?c:d,g=f<m?f:m,h=f<m?m:f;r.selectedUnits=r.units.filter((function(e){return e.x>p&&e.x<v&&e.y>g&&e.y<h})),r.selectedUnits.length||(r.selectedBuildings=r.buildings.filter((function(e){return e.x>p&&e.x<v&&e.y>g&&e.y<h}))),t.xStart=0,t.yStart=0,t.xEnd=0,t.yEnd=0}r.selectedUnits.length&&e.addEventListener("mousedown",o,!1),r.selectedBuildings.length&&(e.addEventListener("mousedown",o,!1),console.log("building selected"))}function i(e){t.xEnd=e.clientX,t.yEnd=e.clientY;var n=t.xStart,i=t.xEnd,o=t.yStart,a=t.yEnd,l=n<i?n:i,s=n<i?i:n,u=o<a?o:a,d=o<a?a:o;r.preSelectedUnits=r.units.filter((function(e){return e.x>l&&e.x<s&&e.y>u&&e.y<d}))}function o(t){2===t.button?r.selectedUnits.forEach((function(e){var n=e.x-t.clientX,r=e.y-t.clientY;Math.abs(n)>Math.abs(r)?(e.xvel=-n/Math.abs(n)*e.speed,e.yvel=-r/Math.abs(n)*e.speed):(e.xvel=-n/Math.abs(r)*e.speed,e.yvel=-r/Math.abs(r)*e.speed),e.moveCommand=!0,e.gotoX=t.clientX,e.gotoY=t.clientY})):e.removeEventListener("mousedown",o,!1)}window.oncontextmenu=function(){return!1},e.addEventListener("mousedown",(function(r){0===r.button&&(t.xStart=r.clientX,t.yStart=r.clientY,t.xEnd=r.clientX,t.yEnd=r.clientY,e.addEventListener("mouseup",n,!1),e.addEventListener("mousemove",i,!1))}),!1)}(a,u)},f=function(){var e,t,n,c=Date.now();(c-d)/1e3,l.fillStyle="#665f4a",l.fillRect(0,0,a.width,a.height),function(e){for(var t=e.filter((function(e){return 0!==e.xvel||0!==e.yvel})),n=0;n<t.length;n++){Math.pow(t[n].x-t[n].gotoX,2)+Math.pow(t[n].y-t[n].gotoY,2)<100&&(t[n].xvel=0,t[n].yvel=0,t[n].moveCommand=!1);var r=o(t[n],e);!r&&t[n].moveCommand&&(t[n].x=t[n].x+t[n].xvel,t[n].y=t[n].y+t[n].yvel),r&&t[n].moveCommand&&(t[n].moveCommand=!1),r||t[n].moveCommand||(t[n].moveCommand=!0)}}(r.units),t=u,n=(e=s).ctx,e.width,e.height,r.buildings.forEach((function(e){n.drawImage(r.pngs.filter((function(t){return t.type===e.type}))[0].element,e.x,e.y)})),r.units.forEach((function(e){n.drawImage(r.pngs.filter((function(t){return t.type===e.type}))[0].element,50*i(e.xvel,e.yvel),0,50,49,e.x-17,e.y-17,34,34)})),r.resources.forEach((function(e){n.drawImage(r.pngs.filter((function(t){return t.type===e.type}))[0].element,e.x,e.y,75,50)})),n.drawImage(r.pngs.filter((function(e){return"menu"===e.type}))[0].element,0,800),r.selectedBuildings.forEach((function(e){n.beginPath(),n.arc(e.x+.5*e.radius,e.y+.5*e.radius,(e.radius+e.radius)/2,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=2,n.stroke()})),r.preSelectedBuildings.forEach((function(e){n.beginPath(),n.arc(e.x+.5*e.radius,e.y+.5*e.radius,(e.radius+e.radius)/2,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=1,n.stroke()})),r.selectedUnits.forEach((function(e){n.beginPath(),n.arc(e.x,e.y,e.radius+5,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=2,n.stroke()})),r.preSelectedUnits.forEach((function(e){n.beginPath(),n.arc(e.x,e.y,e.radius+5,0,2*Math.PI,!1),n.strokeStyle=" #00ff00",n.lineWidth=1,n.stroke()})),n.strokeStyle=" #00ff00",n.strokeRect(t.xStart,t.yStart,t.xEnd-t.xStart,t.yEnd-t.yStart),window.requestAnimationFrame(f)},m=function(){f(),c()};!function(e){for(var t=0,n=function(n){var i={type:e[n].type,element:new Image};i.element.addEventListener("load",(function(){r.pngs.push(i),console.log("loaded",i.type),++t===e.length&&m()})),i.element.src=e[n].src},i=0;i<e.length;i++)n(i)}([{type:"marine",src:"./media/marine.png"},{type:"commandCenter",src:"./media/commandCenter.png"},{type:"mineral",src:"./media/minerals.png"},{type:"menu",src:"./media/menu.png"}])}]);